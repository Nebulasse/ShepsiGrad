# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–±–æ—Ä–∫–∏

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ Docker –æ–±—Ä–∞–∑–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:

```
[6/9] RUN npm run build
process "/bin/sh -c npm run build" did not complete successfully: exit code: 2
```

## –ü—Ä–∏—á–∏–Ω–∞

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ TypeScript –≤ –ø–∞–ø–∫–µ `src/_old`, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞–ª–∏:

- –ù–µ–ø–æ–ª–Ω—ã–µ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏
- –ò–º–ø–æ—Ä—Ç—ã –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å –æ—Å–Ω–æ–≤–Ω—ã–º `server.ts`

## –†–µ—à–µ–Ω–∏–µ

### 1. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω tsconfig.json

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

- –ò–∑–º–µ–Ω–µ–Ω `include` —Å `["src/**/*"]` –Ω–∞ `["src/server.ts"]`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –ø–∞–ø–∫–∏ `_old`
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏ `allowJs: false` –∏ `checkJs: false`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** TypeScript —Ç–µ–ø–µ—Ä—å –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã.

### 2. ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–Ω–∞—è –ø–∞–ø–∫–∞

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–∞–ø–∫–∞ `src/_old` –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ `../_old_backup`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ.

### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã Dockerfile'—ã

**Dockerfile:**

- –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤
- –£–ª—É—á—à–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏

**Dockerfile.minimal:**

- –°–æ–∑–¥–∞–Ω –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Dockerfile –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É TypeScript
- –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è —Å–±–æ—Ä–∫–∞

### 4. ‚úÖ –°–æ–∑–¥–∞–Ω .dockerignore

**–î–æ–±–∞–≤–ª–µ–Ω—ã –∏—Å–∫–ª—é—á–µ–Ω–∏—è:**

- `src/_old`
- `_old_backup`
- –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- –õ–æ–≥–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:**

- `deploy-railway.md` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫
- `README.md` - —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç `test-docker-build.sh` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞

```bash
npm run build  # –£—Å–ø–µ—à–Ω–æ
```

### ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ dist/

```
dist/
‚îú‚îÄ‚îÄ server.d.ts
‚îî‚îÄ‚îÄ server.js
```

### ‚úÖ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
npm start  # –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

### Railway

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
3. –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Dockerfile.minimal`

### Docker

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π Dockerfile
docker build -t shepsigrad-backend .

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Dockerfile
docker build -t shepsigrad-backend -f Dockerfile.minimal .
```

## –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞

1. **–ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Ñ–∞–π–ª—ã –≤ `src/_old`** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–µ—Ç–∫–∏ Git
2. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ `dist/`** –ø–µ—Ä–µ–¥ –Ω–æ–≤–æ–π —Å–±–æ—Ä–∫–æ–π
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–±–æ—Ä–∫—É –ª–æ–∫–∞–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.dockerignore`** –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## –°—Ç–∞—Ç—É—Å

üü¢ **–ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê**

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Railway.
